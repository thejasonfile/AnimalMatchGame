//arrays of animal pics used for grid backgrounds
var puppies = [
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/puppies1.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/puppies1.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/puppies1.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/puppies1.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/puppies2.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/puppies2.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/puppies2.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/puppies2.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/puppies3.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/puppies3.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/puppies3.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/puppies3.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/puppies4.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/puppies4.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/puppies4.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/puppies4.jpg",
];

var kittens = [
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/kittens1.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/kittens1.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/kittens1.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/kittens1.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/kittens2.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/kittens2.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/kittens2.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/kittens2.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/kittens3.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/kittens3.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/kittens3.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/kittens3.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/kittens4.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/kittens4.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/kittens4.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/kittens4.jpg",

];

var fish = [
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/fish1.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/fish1.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/fish1.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/fish1.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/fish2.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/fish2.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/fish2.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/fish2.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/fish3.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/fish3.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/fish3.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/fish3.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/fish4.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/fish4.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/fish4.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/fish4.jpg",
];

var birds = [
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/birds1.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/birds1.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/birds1.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/birds1.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/birds2.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/birds2.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/birds2.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/birds2.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/birds3.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/birds3.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/birds3.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/birds3.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/birds4.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/birds4.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/birds4.jpg",
				"https://dl.dropboxusercontent.com/u/755079/images/animalflipgame/birds4.jpg",

];

//empty staging array used so that original arrays aren't changed
var stagingArray = [];
var objectArray = [];
var revealedSquares = [];
var indexArray = [];
var matchedSquares = 0;

function resetVars() {
	objectArray = [];
	revealedSquares = [];
	indexArray = [];
	matchedSquares = 0;
}

//function to set staging array
function setArray(arr) {
	for (i=0; i<arr.length; i++) {
		stagingArray[i] = arr[i];
	}
	setBackgrounds();
};

//generates random number for second background pic
function getRandomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

//crete grid objects
function gridObject() {
	this.firstbackground = 'url("./images/pawprint.png")';
	this.revealed = false;
	this.matched = false;
}

//set default staging array to puppies
setArray(puppies);

//loop through each grid creating a gridObject for each assigning the secondbackground, then adding that secondbackground to the grid's CSS
function setBackgrounds() {
	for (i=0; i<16; i++) {
		var randomNum = getRandomInt(0, stagingArray.length-1);
		objectArray[i] = new gridObject();
		objectArray[i].secondbackground = 'url('+stagingArray[randomNum]+')';
		stagingArray.splice(randomNum,1);
		$($(".grid")[i]).css('background-image', objectArray[i].firstbackground+','+objectArray[i].secondbackground);
	}
	return objectArray;
}

//when one of the buttons is clicked, the backgrounds array changes to the appropriate animal and backgrounds are hidden
$('.puppiesbtn').click(function(){
	resetVars();
	setArray(puppies);
})
$('.kittensbtn').click(function(){
	resetVars();
	setArray(kittens);
})
$('.fishbtn').click(function(){
	resetVars();
	setArray(fish);
})
$('.birdsbtn').click(function(){
	resetVars();
	setArray(birds);
})

//when a grid is clicked
$(".grid").click(function() {
	//set index value
	var index = ($(".grid").index(this));
	if (!(objectArray[index].matched)) {
		$(this).addClass('animated flipInY');
		//reveal its background
		$(this).css('background-image', objectArray[index].secondbackground);
		//add it to the revealed squares array
		revealedSquares[revealedSquares.length] = $(this);
		//add its index to the indexArray
		indexArray[indexArray.length] = index;
		//change objects revealed property to true
		objectArray[index].revealed = true;
		//check to see if it is the first or second square revealed
		if (revealedSquares.length === 2) {
			//check to see if the backgrounds match
			if ($(revealedSquares[0]).attr('style') === $(revealedSquares[1]).attr('style')) {
				//if they match, increase matched squares by 2, clear revealed squares, change objects matched property to true
				matchedSquares += 2;
				revealedSquares = [];
				objectArray[indexArray[0]].matched = true;
				objectArray[indexArray[1]].matched = true;
				indexArray = [];
				//check to see if all squares are matched
				if (matchedSquares === $(".grid").length) {
				alert ("You've matched all of the squares!");
				}
			} else {
				//reset backgrounds and else clear revealed squares and change objects revealed property to false
				alert("Not a match!");
				$(revealedSquares[0]).css('background-image', objectArray[index].firstbackground).removeClass('animated flipInY');
				$(revealedSquares[1]).css('background-image', objectArray[index].firstbackground).removeClass('animated flipInY');
				revealedSquares = [];
				objectArray[indexArray[0]].revealed = false;
				objectArray[indexArray[1]].revealed = false;
				indexArray = [];
			}
		}
	}
}) //end click
